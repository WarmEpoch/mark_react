import{u as o,a as I,m as U,j as t,U as C,d as g,b as u,c as h,r as w,D as B,i as R,e as A}from"./index-3409eee2.js";import{I as _}from"./Footer-aa99d9d6.js";function H(b){var p,v,c,f;const{name:s}=b,r=o(e=>e.imgs),l=o(e=>e.index),m=o(e=>e.icons),d=I(),[y,k]=U.useMessage(),j={beforeUpload:async e=>{const a=e.name.split(".")[0],n=await R(e);return m.findIndex(i=>i.name==a||i.value==n)>=0?(y.warning("该标志已上传"),!1):(d(A({name:a,value:n})),!1)},accept:"image/svg+xml, image/png, image/jpeg",maxCount:1,showUploadList:!1},D=(()=>[{key:"Upload",label:t.jsx(C,{...j,children:"上传"})},{key:"Default",label:"默认标志",type:"divider",children:g.map(e=>{var a;return{key:e.name,label:t.jsx("a",{onClick:n=>{n.preventDefault(),d(u({index:l,key:s,value:e.val}))},children:e.name}),disabled:e.val===((a=r[l])==null?void 0:a.reveals[s])}})},{key:"Camera",label:"相机标志",type:"divider",children:h.map(e=>{var a;return{key:e.name,label:t.jsx("a",{onClick:n=>{n.preventDefault(),d(u({index:l,key:s,value:e.val}))},children:e.name}),disabled:e.val===((a=r[l])==null?void 0:a.reveals[s])}})},...m.length&&[{key:"Reveals",label:"自定义标志",type:"divider",children:m.map((e,a)=>{var n;return{key:e.name,label:t.jsx("a",{style:{color:e.value===((n=r[l])==null?void 0:n.reveals[s])?"red":"inherit"},onClick:x=>{var i;x.preventDefault(),e.value===((i=r[l])==null?void 0:i.reveals[s])?d(w(a)):d(u({index:l,key:s,value:e.value}))},children:e.name})}})}]||[]])();return t.jsxs(t.Fragment,{children:[t.jsx(B.Button,{menu:{items:D},children:t.jsx(_,{style:{minWidth:"4em"},bordered:!1,disabled:!0,defaultValue:((p=g.find(e=>{var a;return e.val==((a=r[l])==null?void 0:a.reveals[s])}))==null?void 0:p.name)||((v=h.find(e=>{var a;return e.val==((a=r[l])==null?void 0:a.reveals[s])}))==null?void 0:v.name)||((c=m.find(e=>{var a;return e.value==((a=r[l])==null?void 0:a.reveals[s])}))==null?void 0:c.name)||"错误"},(f=r[l])==null?void 0:f.reveals[s])}),k]})}export{H as D};
